<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#667eea">
    <title>๐ผ ุงูุดูุจุงุก - ุฅุฏุงุฑุฉ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="supabase-styles.css">
</head>
<body>
    <div class="container">
        <div id="loginContainer" class="login-container">
            <h1 style="color: #ffc107; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">๐ข ูุฌููุนุฉ ุงูุดูุจุงุก ุงูุชุฌุงุฑูุฉ</h1>
            <h2 style="color: white;">ูุธุงู ุฅุฏุงุฑุฉ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ</h2>
            
            <div class="login-box">
                <h3>ุชุณุฌูู ุงูุฏุฎูู</h3>
                <form id="loginForm" onsubmit="authenticate(event)">
                    <div class="form-group">
                        <label for="username">ุงุณู ุงููุณุชุฎุฏู:</label>
                        <input type="text" id="username" name="username" required>
                    </div>
                    <div class="form-group">
                        <label for="password">ูููุฉ ุงููุฑูุฑ:</label>
                        <input type="password" id="password" name="password" required>
                    </div>
                    <button type="submit">ุฏุฎูู</button>
                </form>
                <div id="errorMessage" class="error-message" style="display: none;"></div>
            </div>
        </div>

        <!-- ุตูุญุฉ ุงููุฏูุฑ -->
        <div class="dashboard" id="managerDashboard" style="display: none;">
            <div class="header" style="background: linear-gradient(135deg, #2e7d32 0%, #4caf50 100%);">
                <h1>๐ข <span style="color: #ffc107;">ูุฌููุนุฉ ุงูุดูุจุงุก ุงูุชุฌุงุฑูุฉ</span> - ููุญุฉ ุงูุฅุฏุงุฑุฉ</h1>
                <div class="header-buttons">
                    <button class="sync-btn" onclick="reloadDataFromSupabase()" title="ุชุญุฏูุซ ุงูุจูุงูุงุช ูู Supabase">
                        ๐ ุชุญุฏูุซ ุงูุจูุงูุงุช
                    </button>
                    <button class="logout-btn" onclick="logout()">ุชุณุฌูู ุฎุฑูุฌ</button>
                </div>
            </div>
            
            <div class="tabs">
                <button class="tab-btn active" onclick="showTab('employees')">๐ฅ ุฅุฏุงุฑุฉ ุงูููุธููู</button>
                <button class="tab-btn" onclick="showTab('reports')">๐ ุงูุชูุงุฑูุฑ</button>
                <button class="tab-btn" onclick="showTab('finance')">๐ฐ ุงูุดุคูู ุงููุงููุฉ</button>
                <button class="tab-btn" onclick="showTab('locations')">๐ ุฅุฏุงุฑุฉ ุงูููุงูุน</button>
                <button class="tab-btn" onclick="showTab('supabaseConfig')">๐ ูุงุนุฏุฉ ุงูุจูุงูุงุช</button>
            </div>

            <!-- ุฅุฏุงุฑุฉ ุงูููุธููู -->
            <div class="tab-content active" id="employees">
                <div class="section">
                    <h3>๐ค ุฅุถุงูุฉ ููุธู ุฌุฏูุฏ - <span style="color: #ffc107;">ูุฌููุนุฉ ุงูุดูุจุงุก ุงูุชุฌุงุฑูุฉ</span></h3>
                    <form id="addEmployeeForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="empName">ุงูุงุณู:</label>
                                <input type="text" id="empName" required>
                            </div>
                            <div class="form-group">
                                <label for="empUsername">ุงุณู ุงููุณุชุฎุฏู:</label>
                                <input type="text" id="empUsername" required>
                            </div>
                            <div class="form-group">
                                <label for="empPassword">ูููุฉ ุงููุฑูุฑ:</label>
                                <input type="password" id="empPassword" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="empPosition">ุงูููุตุจ:</label>
                                <input type="text" id="empPosition" required>
                            </div>
                            <div class="form-group">
                                <label for="empSalary">ุงูุฑุงุชุจ:</label>
                                <input type="number" id="empSalary" required>
                            </div>
                            <div class="form-group">
                                <label for="empCurrency">ุงูุนููุฉ:</label>
                                <select id="empCurrency" required>
                                    <option value="">ุงุฎุชุฑ ุงูุนููุฉ</option>
                                    <option value="SAR">ุฑูุงู ุณุนูุฏู (SAR)</option>
                                    <option value="USD">ุฏููุงุฑ ุฃูุฑููู (USD)</option>
                                    <option value="SYP">ููุฑุฉ ุณูุฑูุฉ (SYP)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="empBranch">ุงููุฑุน:</label>
                                <select id="empBranch" required>
                                    <option value="">ุงุฎุชุฑ ุงููุฑุน</option>
                                </select>
                            </div>
                        </div>
                        <button type="submit">ุฅุถุงูุฉ ููุธู</button>
                    </form>
                </div>

                <div class="section">
                    <h3>ูุงุฆูุฉ ุงูููุธููู</h3>
                    <div class="table-container">
                        <table id="employeesTable">
                            <thead>
                                <tr>
                                    <th>ุงูุงุณู</th>
                                    <th>ุงูููุตุจ</th>
                                    <th>ุงูุฑุงุชุจ</th>
                                    <th>ุงูุนููุฉ</th>
                                    <th>ุงููุฑุน</th>
                                    <th>ุงูุฅุฌุฑุงุกุงุช</th>
                                </tr>
                            </thead>
                            <tbody id="employeesTableBody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- ุงูุชูุงุฑูุฑ -->
            <div class="tab-content" id="reports">
                <div class="section">
                    <h3>ุงูุชูุฑูุฑ ุงูุฃุณุจูุนู</h3>
                    <div class="week-info" style="background: #e8f5e8; padding: 10px; border-radius: 5px; margin-bottom: 15px; border-left: 4px solid #28a745;">
                        <h5 style="color: #155724; margin: 0 0 5px 0;">๐ ูุธุงู ุงูุฃุณุจูุน ุงูุนุฑุจู</h5>
                        <p style="margin: 0; font-size: 14px; color: #155724;">
                            <strong>ุงูุฃุณุจูุน ูุจุฏุฃ ูู ุงูุณุจุช ูููุชูู ุจุงูุฎููุณ</strong> - ุงูุฌูุนุฉ ุนุทูุฉ ุฃุณุจูุนูุฉ ุฑุณููุฉ
                        </p>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="reportWeek">ุงุฎุชุฑ ุงูุฃุณุจูุน:</label>
                            <input type="week" id="reportWeek">
                        </div>
                        <button onclick="generateWeeklyReport()">ุฅูุดุงุก ุงูุชูุฑูุฑ</button>
                    </div>
                    <div class="table-container">
                        <table id="weeklyReportTable">
                            <thead>
                                <tr>
                                    <th>ุงูููุธู</th>
                                    <th>ุงูููุตุจ</th>
                                    <th>ุงูุฑุงุชุจ ุงูุดูุฑู</th>
                                    <th>ุงูุนููุฉ</th>
                                    <th>ุฅุฌูุงูู ุงูููุช</th>
                                    <th>ุฃูุงู ุงูุญุถูุฑ</th>
                                    <th>ุงููุจูุบ ุงููุณุชุญู</th>
                                    <th>ุงูุชูุงุตูู</th>
                                </tr>
                            </thead>
                            <tbody id="weeklyReportTableBody">
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="section" id="employeeDetailSection" style="display: none;">
                    <h3>ุชูุงุตูู ุญุถูุฑ ุงูููุธู</h3>
                    <div class="employee-detail-header">
                        <div>
                            <h4 id="detailEmployeeName"></h4>
                            <p id="detailEmployeeInfo"></p>
                        </div>
                        <div class="action-buttons">
                            <button onclick="printEmployeeReport()" class="action-btn" style="background: #28a745;">ุทุจุงุนุฉ ุงูุชูุฑูุฑ</button>
                            <button onclick="hideEmployeeDetail()" class="action-btn">ุฅุบูุงู ุงูุชูุงุตูู</button>
                        </div>
                    </div>
                    <div class="table-container">
                        <table id="employeeDetailTable">
                                                         <thead>
                                 <tr>
                                     <th>ุงูุชุงุฑูุฎ</th>
                                     <th>ุงูููู</th>
                                     <th>ููุช ุงูุญุถูุฑ</th>
                                     <th>ููุช ุงูุงูุตุฑุงู</th>
                                     <th>ุฅุฌูุงูู ุงูููุช</th>
                                     <th>ูููุฉ ุงูููู</th>
                                     <th>ุงูุฅุฌุฑุงุกุงุช</th>
                                 </tr>
                             </thead>
                            <tbody id="employeeDetailTableBody">
                            </tbody>
                        </table>
                    </div>
                    <div class="summary-section">
                        <div class="summary-card">
                            <h4>ููุฎุต ุงูุฃุณุจูุน</h4>
                            <div id="weekSummary"></div>
                        </div>
                    </div>
                </div>
                </div>
            </div>

            <!-- ุงูุดุคูู ุงููุงููุฉ -->
            <div class="tab-content" id="finance">
                <div class="section">
                    <h3>ุฅุฏุงุฑุฉ ุงูุฎุตููุงุช ูุงูุณูู</h3>
                    <form id="financeForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="financeEmployee">ุงูููุธู:</label>
                                <select id="financeEmployee" required>
                                    <option value="">ุงุฎุชุฑ ููุธู</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="financeType">ุงูููุน:</label>
                                <select id="financeType" required>
                                    <option value="">ุงุฎุชุฑ ุงูููุน</option>
                                    <option value="deduction">ุฎุตู</option>
                                    <option value="advance">ุณููุฉ</option>
                                    <option value="payment">ุชุณููู ุฑุงุชุจ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="financeAmount">ุงููุจูุบ:</label>
                                <input type="number" id="financeAmount" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="financeReason">ุงูุณุจุจ:</label>
                            <input type="text" id="financeReason" required>
                        </div>
                        <button type="submit">ุฅุถุงูุฉ</button>
                    </form>
                </div>

                <div class="section">
                    <h3>ุณุฌู ุงูุฎุตููุงุช ูุงูุณูู</h3>
                    <div class="table-container">
                        <table id="financeTable">
                            <thead>
                                <tr>
                                    <th>ุงูููุธู</th>
                                    <th>ุงูููุน</th>
                                    <th>ุงููุจูุบ</th>
                                    <th>ุงูุณุจุจ</th>
                                    <th>ุงูุชุงุฑูุฎ</th>
                                    <th>ุงูุฅุฌุฑุงุกุงุช</th>
                                </tr>
                            </thead>
                            <tbody id="financeTableBody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- ุฅุฏุงุฑุฉ ุงูููุงูุน -->
            <div class="tab-content" id="locations">
                <div class="section">
                    <h3>ุฅุถุงูุฉ ูุฑุน ุฌุฏูุฏ</h3>
                    <form id="addBranchForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="branchName">ุงุณู ุงููุฑุน:</label>
                                <input type="text" id="branchName" required placeholder="ูุซุงู: ุงููุฑุน ุงูุฑุฆูุณู">
                            </div>
                            <div class="form-group">
                                <label for="branchAddress">ุงูุนููุงู:</label>
                                <input type="text" id="branchAddress" required placeholder="ูุซุงู: ุงูุฑูุงุถุ ุญู ุงูููุฒ">
                            </div>
                        </div>
                        
                        <div class="location-section">
                            <h4>ุชุญุฏูุฏ ุงููููุน ุงูุฌุบุฑุงูู</h4>
                            <p style="font-size: 14px; color: #666; margin: 10px 0; padding: 10px; background: #fff3cd; border-radius: 5px; border-left: 4px solid #ffc107;">
                                ๐ฏ <strong>ูุตูุญุฉ ูููุฉ:</strong> ููุญุตูู ุนูู ุฃูุถู ุฏูุฉุ ุชุฃูุฏ ูู ูุฌูุฏู ูู ูููุน ุงููุฑุน ุงููุฑุงุฏ ุฅุถุงูุชู ูุจู ุงูุถุบุท ุนูู "ุงุณุชุฎุฏุงู ูููุนู ุงูุญุงูู"
                            </p>
                            <div class="location-methods">
                                <button type="button" class="location-btn" onclick="getCurrentLocationForBranch()">
                                    ๐ ุงุณุชุฎุฏุงู ูููุนู ุงูุญุงูู
                                </button>
                                <button type="button" class="location-btn" onclick="showManualLocationInput()">
                                    โ๏ธ ุฅุฏุฎุงู ุฅุญุฏุงุซูุงุช ูุฏููุงู
                                </button>
                            </div>
                            
                            <div class="form-row" id="manualLocationInputs" style="display: none;">
                                <div class="form-group">
                                    <label for="branchLatitude">ุฎุท ุงูุนุฑุถ (Latitude):</label>
                                    <input type="number" id="branchLatitude" step="any" placeholder="24.7136">
                                </div>
                                <div class="form-group">
                                    <label for="branchLongitude">ุฎุท ุงูุทูู (Longitude):</label>
                                    <input type="number" id="branchLongitude" step="any" placeholder="46.6753">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="branchRadius">ูุทุงู ุงูุญุถูุฑ (ุจุงููุชุฑ):</label>
                                <input type="number" id="branchRadius" value="100" min="50" max="500" required>
                                <small>ุงููุณุงูุฉ ุงููุณููุญุฉ ูู ููุทุฉ ุงููุฑุน ูุชุณุฌูู ุงูุญุถูุฑ</small>
                            </div>
                            
                            <!-- ุฅุฏุงุฑุฉ ุดุจูุงุช WiFi -->
                            <div class="form-group" style="border-top: 1px solid #dee2e6; padding-top: 15px; margin-top: 15px;">
                                <label style="font-weight: bold; color: #17a2b8;">๐ถ ุดุจูุงุช WiFi ุงูููุจููุฉ (ุทูุงู ุณุงุนุงุช ุงูุนูู):</label>
                                <div style="background: #d1ecf1; padding: 10px; border-radius: 5px; margin: 10px 0; font-size: 14px;">
                                    <strong>๐ถ ูุชุงุญุฉ ูู 6 ุตุจุงุญุงู ุฅูู 11 ูุณุงุกู</strong><br>
                                    <small>ุฃุถู ุฃุณูุงุก ุดุจูุงุช WiFi ุงูุชู ูููู ููููุธููู ุงุณุชุฎุฏุงููุง ูู ูุฐุง ุงููุฑุน</small>
                                </div>
                                <div style="display: flex; gap: 5px; margin: 10px 0;">
                                    <input type="text" id="wifiNetworkName" placeholder="ุงุณู ุดุจูุฉ WiFi" 
                                           style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"
                                           onkeypress="if(event.key==='Enter') addWiFiNetworkToForm()">
                                    <button type="button" onclick="addWiFiNetworkToForm()" 
                                            style="padding: 8px 15px; background: #17a2b8; color: white; border: none; border-radius: 4px;">
                                        โ ุฅุถุงูุฉ
                                    </button>
                                </div>
                                <div id="wifiNetworksList" style="margin: 10px 0; padding: 10px; background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 4px; min-height: 40px;">
                                    <small style="color: #666;">๐ถ ุดุจูุงุช WiFi ุงููุถุงูุฉ ุณุชุธูุฑ ููุง...</small>
                                </div>
                            </div>
                            
                            <div class="current-location-display" id="currentLocationDisplay" style="display: none;">
                                <h5>ุงููููุน ุงููุญุฏุฏ:</h5>
                                <p id="selectedLocationText"></p>
                                <div class="location-accuracy" id="locationAccuracy"></div>
                            </div>
                        </div>
                        
                        <button type="submit">ุฅุถุงูุฉ ุงููุฑุน</button>
                    </form>
                </div>

                <div class="section">
                    <h3>ูุงุฆูุฉ ุงููุฑูุน</h3>
                    <div class="table-container">
                        <table id="branchesTable">
                            <thead>
                                <tr>
                                    <th>ุงุณู ุงููุฑุน</th>
                                    <th>ุงูุนููุงู</th>
                                    <th>ุงูุฅุญุฏุงุซูุงุช</th>
                                    <th>ูุทุงู ุงูุญุถูุฑ</th>
                                    <th>ุดุจูุงุช WiFi</th>
                                    <th>ุนุฏุฏ ุงูููุธููู</th>
                                    <th>ุงูุฅุฌุฑุงุกุงุช</th>
                                </tr>
                            </thead>
                            <tbody id="branchesTableBody">
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="section">
                    <h3>๐ถ ุฅุฏุงุฑุฉ ุดุจูุงุช WiFi ูููุฑูุน</h3>
                    <div style="background: #d1ecf1; padding: 15px; border-radius: 5px; margin-bottom: 20px; border-left: 4px solid #17a2b8;">
                        <h5 style="margin-top: 0; color: #0c5460;">๐ถ ูุชุงุญุฉ ุทูุงู ุณุงุนุงุช ุงูุนูู (6ุต - 11ู)</h5>
                        <p style="margin: 10px 0;">
                            ุญุฏุฏ ุดุจูุงุช WiFi ุงูููุจููุฉ ููู ูุฑุน. ุงูููุธููู ูููููู ุชุณุฌูู ุงูุญุถูุฑ ุนูุฏ ุงูุงุชุตุงู ุจูุฐู ุงูุดุจูุงุช ุทูุงู ุณุงุนุงุช ุงูุนูู.
                        </p>
                    </div>
                    
                    <div class="form-group">
                        <label for="selectBranchForWifi">ุงุฎุชุฑ ุงููุฑุน:</label>
                        <select id="selectBranchForWifi" onchange="loadBranchWiFiNetworks()" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; margin-left: 10px;">
                            <option value="">-- ุงุฎุชุฑ ูุฑุน --</option>
                        </select>
                    </div>
                    
                    <div id="wifiManagementSection" style="display: none; margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                        <h5 id="selectedBranchName" style="color: #17a2b8; margin-top: 0;"></h5>
                        
                        <div style="display: flex; gap: 10px; margin: 15px 0; align-items: center;">
                            <input type="text" id="newWifiNetworkName" placeholder="ุงุณู ุดุจูุฉ WiFi ุงูุฌุฏูุฏุฉ" 
                                   style="flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"
                                   onkeypress="if(event.key==='Enter') addWiFiNetworkToBranch()">
                            <button onclick="addWiFiNetworkToBranch()" 
                                    style="padding: 10px 20px; background: #17a2b8; color: white; border: none; border-radius: 4px;">
                                โ ุฅุถุงูุฉ ุดุจูุฉ
                            </button>
                        </div>
                        
                        <div id="branchWifiNetworksList" style="margin: 15px 0;">
                            <!-- ุณุชุชู ุชุนุจุฆุชูุง ุจุงูุฌุงูุง ุณูุฑูุจุช -->
                        </div>
                        
                        <div style="background: #fff3cd; padding: 10px; border-radius: 5px; margin: 10px 0; font-size: 14px;">
                            ๐ก <strong>ูุตุงุฆุญ ูููุฉ:</strong><br>
                            โข ุฃุถู ุงูุงุณู ุงููุงูู ููุดุจูุฉ ุจุฏูุฉ ุชุงูุฉ (ุญุณุงุณ ููุฃุญุฑู ุงููุจูุฑุฉ ูุงูุตุบูุฑุฉ)<br>
                            โข ูููู ุฅุถุงูุฉ ุนุฏุฉ ุดุจูุงุช ูููุฑุน ุงููุงุญุฏ<br>
                            โข ุงูุดุจูุงุช ุณุชููู ูุชุงุญุฉ ููููุธููู ูู 6 ุตุจุงุญุงู ุฅูู 11 ูุณุงุกู<br>
                            โข โ๏ธ ูุฌุจ ุฃู ูุทุงุจู ุงุณู ุงูุดุจูุฉ ุงููุฏุฎู ุงุณููุง ุงูุญูููู ุจุงูุถุจุท
                        </div>
                        
                        <div style="background: #d4edda; padding: 10px; border-radius: 5px; margin: 10px 0; border-left: 4px solid #28a745; font-size: 14px;">
                            <strong>๐ ููู ูุนูู ุงููุธุงู ุงูุฌุฏูุฏ:</strong><br>
                            1. ุงูููุธู ูุฏุฎู ุงุณู ุดุจูุฉ WiFi ุงูุชู ูุชุตู ุจูุง<br>
                            2. ุงููุธุงู ููุงุฑู ุงูุงุณู ูุน ุงูุดุจูุงุช ุงูููุณุฌูุฉ ูููุฑูุน<br>
                            3. ุฅุฐุง ุชุทุงุจู ุงูุงุณูุ ููุณูุญ ุจุชุณุฌูู ุงูุญุถูุฑ<br>
                            4. ุฅุฐุง ูู ูุชุทุงุจูุ ูุชู ุฑูุถ ุชุณุฌูู ุงูุญุถูุฑ
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h3>๐ฑ ุฅุฏุงุฑุฉ QR Codes ููุญุถูุฑ</h3>
                    <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-bottom: 20px; border-left: 4px solid #28a745;">
                        <h5 style="margin-top: 0; color: #28a745;">๐ฏ ุญููู ุงูุญุถูุฑ ุงูุนูููุฉ - ุจุฏูู ุชุนููุฏ!</h5>
                        <div style="background: #d1ecf1; padding: 10px; border-radius: 5px; margin: 10px 0; text-align: center;">
                            <strong>๐ก ุฃุฑุจุน ุทุฑู ุนูููุฉ:</strong> GPS + QR Code + WiFi + ูููุฉ ุณุฑ ููููุฉ
                        </div>
                        <p style="margin: 10px 0;">
                            <strong>ุงููุดููุฉ:</strong> GPS ูุญุฏู ุบูุฑ ุฏููู ุฃุญูุงูุงู ููุญุชุงุฌ ุจุฏุงุฆู ุนูููุฉ<br>
                            <strong>ุงูุญููู:</strong> ุฃุฑุจุน ุทุฑู ูุฎุชููุฉ ูุฎุชุงุฑ ุงูููุธู ุงูุฃูุณุจ ุญุณุจ ุงููุถุน
                        </p>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; margin: 15px 0;">
                            <div style="background: white; padding: 12px; border-radius: 5px; border-left: 3px solid #007bff;">
                                <h6 style="margin-top: 0; color: #007bff;">๐ ุงููููุน ุงูุฌุบุฑุงูู</h6>
                                <ul style="font-size: 13px; margin: 5px 0;">
                                    <li>โ ุฏููู ูู ุงูุฃูุงูู ุงูููุชูุญุฉ</li>
                                    <li>โก ุชููุงุฆู ูุณุฑูุน</li>
                                    <li>๐ฑ ูุนูู ุนูู ุฌููุน ุงูููุงุชู</li>
                                </ul>
                            </div>
                            <div style="background: white; padding: 12px; border-radius: 5px; border-left: 3px solid #28a745;">
                                <h6 style="margin-top: 0; color: #28a745;">๐ QR Code ูููู</h6>
                                <ul style="font-size: 13px; margin: 5px 0;">
                                    <li>โ ุฏูุฉ 100% - ูุง ุบุด</li>
                                    <li>โฐ ุตุงูุญ ูููู ูุงูู</li>
                                    <li>๐จ๏ธ ุทุจุงุนุฉ ูุงุญุฏุฉ ููููุงู</li>
                                </ul>
                            </div>
                            <div style="background: white; padding: 12px; border-radius: 5px; border-left: 3px solid #17a2b8;">
                                <h6 style="margin-top: 0; color: #17a2b8;">๐ถ ุดุจูุฉ WiFi</h6>
                                <ul style="font-size: 13px; margin: 5px 0;">
                                    <li>โ ุฐูู - ููุชุดู ุชููุงุฆูุงู</li>
                                    <li>๐ข ูุซุงูู ููููุงุชุจ</li>
                                    <li>๐ ูุชุงุญ 6ุต - 11ู</li>
                                    <li>๐ง ุฅุนุฏุงุฏ ุจุณูุท</li>
                                </ul>
                            </div>
                                                         <div style="background: white; padding: 12px; border-radius: 5px; border-left: 3px solid #ffc107;">
                                 <h6 style="margin-top: 0; color: #e67e22;">๐ ูููุฉ ุณุฑ ููููุฉ</h6>
                                 <ul style="font-size: 13px; margin: 5px 0;">
                                     <li>โ <strong>ุจุฏูู ุจุณูุท ูุนููู</strong></li>
                                     <li>๐ ูุชุงุญุฉ ุฏุงุฆูุงู</li>
                                     <li>๐ฃ๏ธ ุชูุนูู ูู ุงูููุชุจ</li>
                                     <li>๐ซ ูุง ุชูููุฉ ูุนูุฏุฉ</li>
                                 </ul>
                             </div>
                         </div>
                         
                         <!-- ุฌุฏูู ุงูุฃููุงุช ุงูููุงุณุจุฉ -->
                         <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 15px 0; border: 1px solid #dee2e6;">
                             <h6 style="margin-top: 0; color: #495057; text-align: center;">โฐ ุงูุชูุฒูุน ุงูุฒููู ุงูุฐูู ููุทุฑู</h6>
                             <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin: 10px 0;">
                                 <div style="background: #d1ecf1; padding: 10px; border-radius: 5px; text-align: center; border-left: 4px solid #17a2b8;">
                                     <strong>๐ถ ุณุงุนุงุช ุงูุนูู (6ุต - 11ู)</strong><br>
                                     <small>WiFi Detection - ุงูุฎูุงุฑ ุงูุฃุณุงุณู</small>
                                 </div>
                                 <div style="background: #d4edda; padding: 10px; border-radius: 5px; text-align: center; border-left: 4px solid #28a745;">
                                     <strong>๐ ุญุงูุงุช ุฎุงุตุฉ (11ู - 6ุต)</strong><br>
                                     <small>QR Code</small>
                                 </div>
                                 <div style="background: #fff3cd; padding: 10px; border-radius: 5px; text-align: center; border-left: 4px solid #ffc107;">
                                     <strong>๐ ูููุฉ ุงูุณุฑ ุงูููููุฉ</strong><br>
                                     <small>ูุชุงุญุฉ ุฏุงุฆูุงู ูุจุฏูู</small>
                                 </div>
                                 <div style="background: #cce5ff; padding: 10px; border-radius: 5px; text-align: center; border-left: 4px solid #007bff;">
                                     <strong>๐ ุงููููุน ุงูุฌุบุฑุงูู</strong><br>
                                     <small>ูุชุงุญ ุฏุงุฆูุงู ูุจุฏูู</small>
                                 </div>
                             </div>
                         </div>
                         
                         <div style="background: #d1ecf1; padding: 10px; border-radius: 5px; margin: 10px 0; border-left: 4px solid #17a2b8; text-align: center;">
                             <strong>๐ถ WiFi Detection:</strong> ุงูุทุฑููุฉ ุงูุฃุณุงุณูุฉ ููุนุธู ุณุงุนุงุช ุงูุนูู (6ุต - 11ู)!<br>
                             <small>ุงูุทุฑู ุงูุฃุฎุฑู ูุชุงุญุฉ ุฏุงุฆูุงู ูุจุฏุงุฆู</small>
                         </div>
                    </div>
                    
                    <div class="qr-management" style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                        <h4>๐ข ุฅูุดุงุก QR Codes ูููุฑูุน</h4>
                        
                        <!-- ููุงุญุธุฉ ุงูุชูุฒูุน ุงูุฒููู -->
                        <div style="background: #d4edda; padding: 15px; border-radius: 5px; margin: 15px 0; border-left: 4px solid #28a745;">
                            <h6 style="margin-top: 0; color: #155724;">๐ ุงูุชูุฒูุน ุงูุฒููู ุงูุฐูู ุงูููุทุจู</h6>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 8px; font-size: 14px;">
                                <div><strong>๐ถ ุณุงุนุงุช ุงูุนูู:</strong> WiFi Detection (6ุต - 11ู)</div>
                                <div><strong>๐ ุญุงูุงุช ุฎุงุตุฉ:</strong> QR Code (11ู - 6ุต)</div>
                                <div><strong>๐ ุจุฏูู:</strong> ูููุฉ ุงูุณุฑ ุงูููููุฉ</div>
                                <div><strong>๐ ุจุฏูู:</strong> ุงููููุน ุงูุฌุบุฑุงูู</div>
                            </div>
                        </div>
                        
                        <div id="branchQRList" style="margin: 20px 0;">
                            <!-- ุณูุชู ููุคูุง ุจุงูุฌุงูุง ุณูุฑูุจุช -->
                        </div>
                        <button onclick="generateAllDailyQRs()" style="padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 5px; margin: 10px 5px;">
                            ๐ ุฅูุดุงุก QR Codes ููุญุงูุงุช ุงูุฎุงุตุฉ (11ู - 6ุต)
                        </button>
                        <button onclick="showTodayPassword()" style="padding: 10px 20px; background: #ffc107; color: black; border: none; border-radius: 5px; margin: 10px 5px;">
                            ๐ ุนุฑุถ ูููุฉ ุงูุณุฑ ุงูููููุฉ (ุจุฏูู)
                        </button>
                        <button onclick="showPasswordManagement()" style="padding: 10px 20px; background: #17a2b8; color: white; border: none; border-radius: 5px; margin: 10px 5px;">
                            ๐๏ธ ุฅุฏุงุฑุฉ ูููุงุช ุงูุณุฑ
                        </button>
                    </div>
                </div>

                <div class="section">
                    <h3>ุงุฎุชุจุงุฑ ุงููููุน</h3>
                    <p>ููููู ุงุฎุชุจุงุฑ ุชุญุฏูุฏ ุงููููุน ุงูุฌุบุฑุงูู ููุญุต ูุฑูุน ุงูุดุฑูุฉ:</p>
                    
                    <div class="button-group" style="margin-bottom: 15px;">
                        <button class="test-location-btn" onclick="testLocationAccess()">
                            ๐งช ุงุฎุชุจุงุฑ ุชุญุฏูุฏ ุงููููุน
                        </button>
                        <button class="test-location-btn" onclick="testCurrentLocation()">
                            ๐ ุงุฎุชุจุงุฑ ูููุนู ูุน ุงููุฑูุน
                        </button>
                    </div>
                    
                    <div id="locationTestResult" class="test-result"></div>
                    
                    <div class="location-help" style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #17a2b8;">
                        <h5 style="color: #17a2b8; margin-top: 0;">๐ก ูุดุงูู ุดุงุฆุนุฉ ูู ุชุญุฏูุฏ ุงููููุน:</h5>
                        
                        <div style="margin: 10px 0;">
                            <strong>๐ซ ุฅุฐุง ูุงูุช ุงูุตูุงุญูุงุช ูุฑููุถุฉ:</strong>
                            <ul style="margin: 5px 0 10px 20px; font-size: 14px;">
                                <li>ุงุถุบุท ุนูู ุฃููููุฉ ๐ ุฃู ๐ ุจุฌุงูุจ ุฑุงุจุท ุงููููุน</li>
                                <li>ุงุฎุชุฑ "ุงูุณูุงุญ" ูููููุน ุงูุฌุบุฑุงูู</li>
                                <li>ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ</li>
                            </ul>
                        </div>
                        
                        <div style="margin: 10px 0;">
                            <strong>๐ถ ุฅุฐุง ูุงู ุงููููุน ุบูุฑ ูุชุงุญ:</strong>
                            <ul style="margin: 5px 0 10px 20px; font-size: 14px;">
                                <li>ุชุฃูุฏ ูู ุชูุนูู GPS ูู ุงูุฌูุงุฒ</li>
                                <li>ุงุฎุฑุฌ ุฅูู ููุงู ููุชูุญ (ุจุนูุฏุงู ุนู ุงููุจุงูู)</li>
                                <li>ุชุฃูุฏ ูู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช</li>
                                <li>ุฃุบูู VPN ุฅุฐุง ูุงู ููุนูุงู</li>
                            </ul>
                        </div>
                        
                        <div style="margin: 10px 0;">
                            <strong>โฐ ุฅุฐุง ุงูุชูุช ูููุฉ ุงูููุช:</strong>
                            <ul style="margin: 5px 0 10px 20px; font-size: 14px;">
                                <li>ุฌุฑุจ ูุฑุฉ ุฃุฎุฑู ูู ููุงู ููุชูุญ</li>
                                <li>ุงูุชุธุฑ ููููุงู ุซู ุฃุนุฏ ุงููุญุงููุฉ</li>
                                <li>ุงุณุชุฎุฏู "ุฅุฏุฎุงู ุฅุญุฏุงุซูุงุช ูุฏููุงู" ูุจุฏูู</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ุตูุญุฉ ุงูููุธู -->
        <div class="dashboard" id="employeeDashboard" style="display: none;">
            <div class="header" style="background: linear-gradient(135deg, #2e7d32 0%, #4caf50 100%);">
                <h1>๐ข <span style="color: #ffc107;">ูุฌููุนุฉ ุงูุดูุจุงุก ุงูุชุฌุงุฑูุฉ</span> - ุจูุงุจุฉ ุงูููุธู</h1>
                <div class="user-info">
                    <span id="employeeName"></span> - <span id="employeePosition"></span>
                </div>
                <div class="header-buttons">
                    <button class="sync-btn" onclick="reloadDataFromSupabase()" title="ุชุญุฏูุซ ุงูุจูุงูุงุช ูู Supabase">
                        ๐ ุชุญุฏูุซ
                    </button>
                    <button class="logout-btn" onclick="logout()">ุชุณุฌูู ุฎุฑูุฌ</button>
                </div>
            </div>

            <div class="section">
                                        <h3>๐ข ุชุณุฌูู ุงูุญุถูุฑ - <span style="color: #ffc107;">ูุฌููุนุฉ ุงูุดูุจุงุก ุงูุชุฌุงุฑูุฉ</span></h3>
                <div class="attendance-section">
                    <div class="current-time">
                        <div id="currentTime"></div>
                        <div id="currentDate"></div>
                    </div>
                    
                    <!-- ุชุณุฌูู ุงูุญุถูุฑ ุนุจุฑ ุงููููุน ุงูุฌุบุฑุงูู -->
                    <div class="shahba-attendance-section" style="margin: 20px 0; padding: 25px; background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border-radius: 15px; box-shadow: 0 10px 30px rgba(30, 60, 114, 0.3);">
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div style="display: inline-block; background: rgba(255,255,255,0.15); padding: 15px; border-radius: 50%; margin-bottom: 15px;">
                                <span style="font-size: 48px;">๐</span>
                            </div>
                            <h4 style="margin: 0; color: white; font-size: 20px; font-weight: 600;">ุชุณุฌูู ุงูุญุถูุฑ ุงูุฐูู</h4>
                            <p style="margin: 10px 0 0 0; color: rgba(255,255,255,0.9); font-size: 14px;">ูุธุงู ุชุญุฏูุฏ ุงููููุน ุงูุฌุบุฑุงูู ุงููุชุทูุฑ</p>
                        </div>
                        
                        <div class="location-status" id="locationStatus" style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; margin: 20px 0; border: 1px solid rgba(255,255,255,0.2);">
                            <div style="text-align: center; color: white;">
                                <div style="font-size: 24px; margin-bottom: 10px;">๐</div>
                                <p style="margin: 0; font-size: 16px;">ุฌุงุฑู ุงูุชุญูู ูู ูููุนู...</p>
                            </div>
                        </div>
                        
                        <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #28a745;">
                            <h6 style="margin-top: 0; color: #ffc107; font-weight: 600;">๐ฏ ูุฌููุนุฉ ุงูุดูุจุงุก ุงูุชุฌุงุฑูุฉ</h6>
                            <p style="margin: 5px 0; color: rgba(255,255,255,0.9); font-size: 14px;">
                                ูุธุงู ูุชุทูุฑ ูุถูุงู ุฏูุฉ ุชุณุฌูู ุงูุญุถูุฑ ูู ููุงูุน ุงูุนูู ุงููุนุชูุฏุฉ
                            </p>
                        </div>
                    </div>
                    
                    <div class="attendance-buttons">
                        <button class="attendance-btn checkin shahba-btn-primary" onclick="checkIn()">
                            <span>๐ฅ</span> ุชุณุฌูู ุญุถูุฑ
                        </button>
                        <button class="attendance-btn checkout shahba-btn-secondary" onclick="checkOut()">
                            <span>๐ค</span> ุชุณุฌูู ุงูุตุฑุงู
                        </button>
                    </div>
                    

                    <div class="today-status" id="todayStatus"></div>
                </div>
            </div>

            <div class="section">
                                    <h3>๐ ุณุฌู ุงูุญุถูุฑ - <span style="color: #ffc107;">ูุฌููุนุฉ ุงูุดูุจุงุก ุงูุชุฌุงุฑูุฉ</span></h3>
                <div class="table-container">
                    <table id="attendanceTable">
                        <thead>
                            <tr>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ููุช ุงูุญุถูุฑ</th>
                                <th>ููุช ุงูุงูุตุฑุงู</th>
                                <th>ุฅุฌูุงูู ุงูุณุงุนุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="attendanceTableBody">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ุงูุจูุงู ุงููุงูู ููููุธู -->
            <div id="employeeFinancialReport" class="dashboard-section" style="display: none;">
                <h2>๐ ุงูุจูุงู ุงููุงูู ุงูุฃุณุจูุนู</h2>
                

                
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 15px 0;">
                    <!-- ูุนูููุงุช ุงูููุธู ุงููุงููุฉ -->
                    <div class="financial-overview" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                        <div class="financial-card" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); color: white; padding: 15px; border-radius: 8px; text-align: center; border: 2px solid rgba(255,255,255,0.2);">
                            <h4 style="margin: 0; font-size: 14px;">๐ฐ ุงูุฑุงุชุจ ุงูุดูุฑู</h4>
                            <p style="margin: 5px 0; font-size: 20px; font-weight: bold;" id="employeeSalaryDisplay">-- --</p>
                            <small id="employeeCurrencyDisplay">SAR</small>
                        </div>
                        <div class="financial-card" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; padding: 15px; border-radius: 8px; text-align: center; border: 2px solid rgba(255,255,255,0.2);">
                            <h4 style="margin: 0; font-size: 14px;">โฑ๏ธ ูุนุฏู ุงูุณุงุนุฉ</h4>
                            <p style="margin: 5px 0; font-size: 20px; font-weight: bold;" id="hourlyRateDisplay">-- --</p>
                            <small>ุจุงูุณุงุนุฉ</small>
                        </div>
                        <div class="financial-card" style="background: linear-gradient(135deg, #c9a96e 0%, #ddbf85 100%); color: #333; padding: 15px; border-radius: 8px; text-align: center; border: 2px solid rgba(0,0,0,0.1);">
                            <h4 style="margin: 0; font-size: 14px;">๐ ูุนุฏู ุงูููู</h4>
                            <p style="margin: 5px 0; font-size: 20px; font-weight: bold;" id="dailyRateDisplay">-- --</p>
                            <small>ุจุงูููู</small>
                        </div>
                    </div>

                    <!-- ุงุฎุชูุงุฑ ุงูุฃุณุจูุน -->
                    <div class="week-selector" style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0; border: 1px solid #dee2e6;">
                        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <label for="employeeWeekSelect" style="font-weight: bold; color: #495057;">๐ ุงุฎุชุฑ ุงูุฃุณุจูุน:</label>
                                <input type="week" id="employeeWeekSelect" style="padding: 8px; border: 1px solid #007bff; border-radius: 4px;" onchange="loadEmployeeFinancialReport()">
                            </div>
                                                    <button onclick="loadEmployeeFinancialReport()" class="modern-btn primary">
                            <i class="icon">๐</i>
                            <span>ุชุญุฏูุซ ุงูุจูุงู</span>
                        </button>
                        </div>
                        <div class="week-info-card">
                            <div class="info-icon">๐</div>
                            <div class="info-text">
                                <span class="info-title">ูุธุงู ุงูุฃุณุจูุน ุงูุนุฑุจู</span>
                                <span class="info-subtitle">ุงูุณุจุช ุฅูู ุงูุฎููุณ</span>
                            </div>
                        </div>
                    </div>

                    <!-- ุงูุจูุงู ุงููุงูู ุงูุฃุณุจูุนู -->
                    <div class="weekly-financial-report" id="weeklyFinancialReport">
                        <div class="financial-summary" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin: 15px 0;">
                            <div class="summary-item" style="background: #fff3cd; padding: 12px; border-radius: 6px; text-align: center; border-left: 4px solid #ffc107;">
                                <small style="color: #856404; font-weight: bold;">โฑ๏ธ ุณุงุนุงุช ุงูุนูู</small>
                                <p style="margin: 5px 0; font-size: 18px; font-weight: bold; color: #856404;" id="totalWorkHours">0:00:00</p>
                            </div>
                            <div class="summary-item" style="background: #d4edda; padding: 12px; border-radius: 6px; text-align: center; border-left: 4px solid #28a745;">
                                <small style="color: #155724; font-weight: bold;">๐ฐ ุงููุจูุบ ุงููุณุชุญู</small>
                                <p style="margin: 5px 0; font-size: 18px; font-weight: bold; color: #155724;" id="totalEarnings">0.00</p>
                            </div>
                            <div class="summary-item" style="background: #f8d7da; padding: 12px; border-radius: 6px; text-align: center; border-left: 4px solid #dc3545;">
                                <small style="color: #721c24; font-weight: bold;">โ ุงูุฎุตููุงุช</small>
                                <p style="margin: 5px 0; font-size: 18px; font-weight: bold; color: #721c24;" id="totalDeductions">0.00</p>
                            </div>
                            <div class="summary-item" style="background: #cce5ff; padding: 12px; border-radius: 6px; text-align: center; border-left: 4px solid #007bff;">
                                <small style="color: #004085; font-weight: bold;">โ ุงูุณูู</small>
                                <p style="margin: 5px 0; font-size: 18px; font-weight: bold; color: #004085;" id="totalAdvances">0.00</p>
                            </div>
                            <div class="summary-item" style="background: #d1ecf1; padding: 12px; border-radius: 6px; text-align: center; border-left: 4px solid #17a2b8;">
                                <small style="color: #0c5460; font-weight: bold;">โ ุงููุฏููุน ูุณุจูุงู</small>
                                <p style="margin: 5px 0; font-size: 18px; font-weight: bold; color: #0c5460;" id="totalPayments">0.00</p>
                            </div>
                            <div class="summary-item" style="background: #e2e3e5; padding: 12px; border-radius: 6px; text-align: center; border-left: 4px solid #6c757d;">
                                <small style="color: #495057; font-weight: bold;">๐ต ุตุงูู ุงููุจูุบ</small>
                                <p style="margin: 5px 0; font-size: 20px; font-weight: bold; color: #495057;" id="netAmount">0.00</p>
                            </div>
                        </div>
                    </div>

                    <!-- ุฌุฏูู ุชูุงุตูู ุงูุญุถูุฑ ุงููุงูู -->
                    <div class="financial-attendance-details" style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0; border: 1px solid #dee2e6;">
                        <h4 style="color: #495057; margin-top: 0;">๐ ุชูุงุตูู ุงูุญุถูุฑ ุงููุงูู</h4>
                        <div class="table-container">
                            <table id="financialAttendanceTable">
                                <thead>
                                    <tr>
                                        <th>ุงูุชุงุฑูุฎ</th>
                                        <th>ุงูููู</th>
                                        <th>ุงูุญุถูุฑ</th>
                                        <th>ุงูุงูุตุฑุงู</th>
                                        <th>ุณุงุนุงุช ุงูุนูู</th>
                                        <th>ูููุฉ ุงูููู</th>
                                        <th>ุงูุญุงูุฉ</th>
                                    </tr>
                                </thead>
                                <tbody id="financialAttendanceTableBody">
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- ุชูุงุตูู ุงูุฎุตููุงุช ูุงูุณูู -->
                    <div class="financial-transactions" style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0; border: 1px solid #dee2e6;">
                        <h4 style="color: #495057; margin-top: 0;">๐ผ ุงูุนูููุงุช ุงููุงููุฉ</h4>
                        <div class="table-container">
                            <table id="financialTransactionsTable">
                                <thead>
                                    <tr>
                                        <th>ุงูุชุงุฑูุฎ</th>
                                        <th>ุงูููุน</th>
                                        <th>ุงููุจูุบ</th>
                                        <th>ุงูุณุจุจ</th>
                                    </tr>
                                </thead>
                                <tbody id="financialTransactionsTableBody">
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- ุฃุฒุฑุงุฑ ุงูุนูููุงุช ุงูุนุตุฑูุฉ -->
                    <div class="financial-actions" style="display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; margin: 24px 0;">
                        <button onclick="printEmployeeFinancialReport()" class="modern-btn">
                            <i class="icon">๐จ๏ธ</i>
                            <span>ุทุจุงุนุฉ ุงูุจูุงู</span>
                        </button>
                        <button onclick="exportEmployeeFinancialReport()" class="modern-btn">
                            <i class="icon">๐</i>
                            <span>ุชุตุฏูุฑ Excel</span>
                        </button>
                        <button onclick="showAllEmployeeFinancialData()" class="modern-btn">
                            <i class="icon">๐</i>
                            <span>ุนุฑุถ ุงููู</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ุฅุนุฏุงุฏุงุช Supabase -->
        <div class="tab-content" id="supabaseConfig">
            <div class="section">
                <h3>๐ ุฅุนุฏุงุฏุงุช Supabase</h3>
                <div class="config-card">
                    <div class="supabase-intro">
                        <div class="intro-text">
                            <h4>๐ฏ ููุงุฐุง Supabaseุ</h4>
                            <ul>
                                <li>โ ูุงุนุฏุฉ ุจูุงูุงุช PostgreSQL ุญููููุฉ</li>
                                <li>โ ูุฌุงูู ููุฃุจุฏ - 500 MB</li>
                                <li>โ ุณุฑุนุฉ ูุงุฆูุฉ ูุฃุฏุงุก ููุชุงุฒ</li>
                                <li>โ ุฃูุงู ุนุงูู ูุน Row Level Security</li>
                                <li>โ Real-time - ุชุญุฏูุซ ููุฑู ููุจูุงูุงุช</li>
                                <li>โ ูุง ุชูุฌุฏ ูููุฏ ุนูู ุงูุงุณุชุฎุฏุงู</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="setup-status">
                        <h4>๐ ุญุงูุฉ ุงููุธุงู</h4>
                        <div class="status-grid">
                            <div class="status-item">
                                <span class="status-label">ุญุงูุฉ ุงูุงุชุตุงู:</span>
                                <span class="status-value" id="supabaseConnectionStatus">ุฌุงุฑู ุงูุชุญูู...</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">ูุงุนุฏุฉ ุงูุจูุงูุงุช:</span>
                                <span class="status-value" id="supabaseDatabaseStatus">ุบูุฑ ูุชุตู</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">ุงูุฌุฏุงูู:</span>
                                <span class="status-value" id="supabaseTablesStatus">ุบูุฑ ุฌุงูุฒุฉ</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="config-section">
                        <h4>โ๏ธ ุฅุนุฏุงุฏ ุงูุงุชุตุงู</h4>
                        <div class="config-inputs">
                            <div class="form-group">
                                <label for="supabaseUrl">Project URL:</label>
                                <input type="url" id="supabaseUrl" 
                                       placeholder="https://your-project.supabase.co"
                                       style="width: 100%; padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px;">
                            </div>
                            <div class="form-group">
                                <label for="supabaseKey">Anon Public Key:</label>
                                <input type="password" id="supabaseKey" 
                                       placeholder="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                                       style="width: 100%; padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px;">
                                <small>ูุฐุง ุงูููุชุงุญ ุขูู - ูููู ุงุณุชุฎุฏุงูู ูู ุงููุชุตูุญ</small>
                            </div>
                        </div>
                        
                        <div class="button-group">
                            <button onclick="saveSupabaseConfig()" class="action-btn success">
                                ๐พ ุญูุธ ุงูุฅุนุฏุงุฏุงุช
                            </button>
                            <button onclick="testSupabaseConnection()" class="action-btn">
                                ๐ ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
                            </button>
                            <button onclick="setupSupabaseTables()" class="action-btn">
                                ๐๏ธ ุฅุนุฏุงุฏ ุงูุฌุฏุงูู
                            </button>
                        </div>
                    </div>
                    
                    <div class="migration-section">
                        <h4>๐ ููู ุงูุจูุงูุงุช</h4>
                        <p>ุฅุฐุง ูุงู ูุฏูู ุจูุงูุงุช ูู ุงููุธุงู ุงููุฏููุ ูููู ููููุง ุชููุงุฆูุงู:</p>
                        <div class="button-group">
                            <button onclick="migrateData()" class="action-btn" style="background: #28a745;">
                                ๐ฆ ููู ุงูุจูุงูุงุช ูู ุงููุธุงู ุงููุฏูู
                            </button>
                            <button onclick="cleanLocalDataManual()" class="action-btn" style="background: #ffc107;">
                                ๐งน ุชูุธูู ุงูุจูุงูุงุช ุงููุญููุฉ
                            </button>
                            <button onclick="clearLocalData()" class="action-btn" style="background: #dc3545;">
                                ๐๏ธ ูุณุญ ุฌููุน ุงูุจูุงูุงุช ุงููุญููุฉ
                            </button>
                        </div>
                    </div>
                    
                    <div class="setup-guide">
                        <h4>๐ ุฏููู ุงูุฅุนุฏุงุฏ ุงูุณุฑูุน</h4>
                        <div class="steps">
                            <div class="step">
                                <span class="step-number">1</span>
                                <div class="step-content">
                                    <strong>ุฅูุดุงุก ูุดุฑูุน ุฌุฏูุฏ:</strong>
                                    <p>ุงุฐูุจ ุฅูู <a href="https://supabase.com" target="_blank">supabase.com</a> ูุฃูุดุฆ ุญุณุงุจ ูุฌุงูู</p>
                                </div>
                            </div>
                            <div class="step">
                                <span class="step-number">2</span>
                                <div class="step-content">
                                    <strong>ุฅูุดุงุก ูุดุฑูุน:</strong>
                                    <p>ุงููุฑ "New Project" ูุงุฎุชุฑ ุงุณู ูุงุฎุชุฑ ูููุฉ ูุฑูุฑ ูููุฉ</p>
                                </div>
                            </div>
                            <div class="step">
                                <span class="step-number">3</span>
                                <div class="step-content">
                                    <strong>ุงูุญุตูู ุนูู ุงูููุงุชูุญ:</strong>
                                    <p>ุงุฐูุจ ุฅูู Settings โ API ูุงูุณุฎ Project URL ู anon public key</p>
                                </div>
                            </div>
                            <div class="step">
                                <span class="step-number">4</span>
                                <div class="step-content">
                                    <strong>ุฅูุดุงุก ุงูุฌุฏุงูู:</strong>
                                    <p>ุงูุณุฎ ูุฃุฌุฑ ุงูููุฏ SQL ุฃุฏูุงู ูู SQL Editor</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="sql-section">
                        <h4>๐พ ููุฏ SQL ูุฅูุดุงุก ุงูุฌุฏุงูู</h4>
                        <p>ุงูุณุฎ ูุฐุง ุงูููุฏ ูุฃุฌุฑู ูู SQL Editor ูู Supabase:</p>
                        <div class="sql-code">
                            <pre id="sqlCode">-- ุฅูุดุงุก ุฌุฏูู ุงููุฑูุน
CREATE TABLE branches (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name TEXT NOT NULL,
    address TEXT,
    latitude DECIMAL,
    longitude DECIMAL,
    radius INTEGER DEFAULT 100,
    wifi_networks TEXT[], -- ุดุจูุงุช WiFi ุงูููุจููุฉ ูููุฑุน
    created_at TIMESTAMP DEFAULT NOW()
);

-- ุฅูุดุงุก ุฌุฏูู ุงูููุธููู
CREATE TABLE employees (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name TEXT NOT NULL,
    username TEXT UNIQUE NOT NULL,
    password TEXT NOT NULL,
    position TEXT NOT NULL,
    salary DECIMAL NOT NULL,
    currency TEXT DEFAULT 'SAR',
    branch_id UUID REFERENCES branches(id),
    role TEXT DEFAULT 'employee',
    created_at TIMESTAMP DEFAULT NOW()
);

-- ุฅูุดุงุก ุฌุฏูู ุงูุญุถูุฑ
CREATE TABLE attendance (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    employee_id UUID REFERENCES employees(id) ON DELETE CASCADE,
    employee_name TEXT NOT NULL,
    date DATE NOT NULL,
    check_in TIME,
    check_out TIME,
    total_hours DECIMAL DEFAULT 0,
    time_display TEXT,
    location TEXT,
    distance DECIMAL,
    created_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(employee_id, date)
);

-- ุฅูุดุงุก ุฌุฏูู ุงูุดุคูู ุงููุงููุฉ
CREATE TABLE finances (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    employee_id UUID REFERENCES employees(id) ON DELETE CASCADE,
    employee_name TEXT NOT NULL,
    type TEXT NOT NULL CHECK (type IN ('deduction', 'advance', 'payment')),
    amount DECIMAL NOT NULL,
    reason TEXT,
    date DATE NOT NULL,
    week_paid TEXT, -- ุงูุฃุณุจูุน ุงููุฏููุน ุนูู (ููุท ูููุน payment)
    created_at TIMESTAMP DEFAULT NOW()
);</pre>
                        </div>
                        <button onclick="copySQLCode()" class="action-btn" style="background: #6f42c1;">
                            ๐ ูุณุฎ ุงูููุฏ
                        </button>
                        
                        <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin: 15px 0; border-left: 4px solid #ffc107;">
                            <h6 style="margin-top: 0; color: #856404;">๐ง ุชุญุฏูุซ ุงูุฌุฏุงูู ุงูููุฌูุฏุฉ</h6>
                            <p style="margin: 5px 0; font-size: 14px;">ุฅุฐุง ูุงูุช ุงูุฌุฏุงูู ููุฌูุฏุฉ ุจุงููุนูุ ุงุณุชุฎุฏู ูุฐุง ุงูููุฏ ูุฅุถุงูุฉ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:</p>
                            <div style="background: #f8f9fa; padding: 10px; border-radius: 3px; font-family: monospace; font-size: 13px; margin: 10px 0;">
                                -- ุฅุถุงูุฉ ุฏุนู ุดุจูุงุช WiFi ูููุฑูุน<br>
                                ALTER TABLE branches ADD COLUMN wifi_networks TEXT[];<br><br>
                                -- ุฅุถุงูุฉ ุฏุนู ุชุณููู ุงูุฑูุงุชุจ<br>
                                ALTER TABLE finances ADD COLUMN week_paid TEXT;<br>
                                ALTER TABLE finances DROP CONSTRAINT IF EXISTS finances_type_check;<br>
                                ALTER TABLE finances ADD CONSTRAINT finances_type_check CHECK (type IN ('deduction', 'advance', 'payment'));
                            </div>
                            <small style="color: #856404;">๐ก ูุฐุง ุณูุถูู ุฏุนู ุดุจูุงุช WiFi ูุชุณููู ุงูุฑูุงุชุจ ููุฌุฏุงูู ุงูููุฌูุฏุฉ</small>
                        </div>
                    </div>
                    
                    <div class="benefits-section">
                        <h4>๐ฏ ูููุฒุงุช ุงุณุชุฎุฏุงู Supabase</h4>
                        <div class="benefits-grid">
                            <div class="benefit-item">
                                <div class="benefit-icon">โก</div>
                                <div class="benefit-text">
                                    <strong>ุณุฑุนุฉ ูุงุฆูุฉ</strong>
                                    <p>ุฃุณุฑุน 10 ูุฑุงุช ูู Google Sheets</p>
                                </div>
                            </div>
                            <div class="benefit-item">
                                <div class="benefit-icon">๐</div>
                                <div class="benefit-text">
                                    <strong>ุฃูุงู ุนุงูู</strong>
                                    <p>Row Level Security ูุฏูุฌ</p>
                                </div>
                            </div>
                            <div class="benefit-item">
                                <div class="benefit-icon">๐</div>
                                <div class="benefit-text">
                                    <strong>Real-time</strong>
                                    <p>ุชุญุฏูุซ ููุฑู ููุจูุงูุงุช</p>
                                </div>
                            </div>
                            <div class="benefit-item">
                                <div class="benefit-icon">๐ฐ</div>
                                <div class="benefit-text">
                                    <strong>ูุฌุงูู ูุฏู ุงูุญูุงุฉ</strong>
                                    <p>500 MB + 2 GB bandwidth</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Supabase Library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.38.4/dist/umd/supabase.min.js"></script>
    
    <!-- Supabase Scripts -->
    <script src="supabase-config.js"></script>
    <script src="supabase-manager.js"></script>
    <script src="supabase-functions.js"></script>
    <script src="script.js"></script>
    
    <!-- Shahba Enhancements -->
    <script src="shahba-enhancements.js"></script>
    
</body>
</html> 